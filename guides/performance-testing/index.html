<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="The universal code optimization engine that improves coding agent experience with deep evaluations and optimization. When AI coding agents dazzle with impressive code but leave you wondering about quality, maintainability, security, and reliability, CodeOptiX ensures proper behavior through evaluations, reflection, and self-improvement."><meta name=author content="Superagentic AI"><link href=https://superagenticai.github.io/codeoptix/guides/performance-testing/ rel=canonical><link href=../ollama-integration/ rel=prev><link href=../ui-testing/ rel=next><link rel=icon href=../../assets/CodeOptiX_Fav.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Performance Testing - CodeOptiX Documentation</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.css><link rel=stylesheet href=../../stylesheets/gradients.css><link rel=stylesheet href=../../stylesheets/syntax.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=purple> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#performance-testing-guide class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="CodeOptiX Documentation" class="md-header__button md-logo" aria-label="CodeOptiX Documentation" data-md-component=logo> <img src=../../assets/CodeOptiX_Logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> CodeOptiX Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Performance Testing </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=purple aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=purple aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/SuperagenticAI/codeoptix title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> SuperagenticAI/codeoptix </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../getting-started/installation/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../concepts/overview/ class=md-tabs__link> Core Concepts </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../python-api/ class=md-tabs__link> Guides </a> </li> <li class=md-tabs__item> <a href=../../advanced/gepa/ class=md-tabs__link> Advanced </a> </li> <li class=md-tabs__item> <a href=../../api-reference/ class=md-tabs__link> API Reference </a> </li> <li class=md-tabs__item> <a href=../../examples/behavioral-spec/ class=md-tabs__link> Examples </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="CodeOptiX Documentation" class="md-nav__button md-logo" aria-label="CodeOptiX Documentation" data-md-component=logo> <img src=../../assets/CodeOptiX_Logo.png alt=logo> </a> CodeOptiX Documentation </label> <div class=md-nav__source> <a href=https://github.com/SuperagenticAI/codeoptix title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> SuperagenticAI/codeoptix </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/quickstart/ class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/single-behavior-quickstart/ class=md-nav__link> <span class=md-ellipsis> Single Behavior Quickstart </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/first-evaluation/ class=md-nav__link> <span class=md-ellipsis> Your First Evaluation </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Core Concepts </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Core Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../concepts/overview/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/adapters/ class=md-nav__link> <span class=md-ellipsis> Agent Adapters </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/behaviors/ class=md-nav__link> <span class=md-ellipsis> Behavior Specifications </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/evaluation/ class=md-nav__link> <span class=md-ellipsis> Evaluation Engine </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/reflection/ class=md-nav__link> <span class=md-ellipsis> Reflection Engine </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/evolution/ class=md-nav__link> <span class=md-ellipsis> Evolution Engine </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/acp/ class=md-nav__link> <span class=md-ellipsis> ACP Integration </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Guides </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../python-api/ class=md-nav__link> <span class=md-ellipsis> Python API </span> </a> </li> <li class=md-nav__item> <a href=../cli-usage/ class=md-nav__link> <span class=md-ellipsis> CLI Usage </span> </a> </li> <li class=md-nav__item> <a href=../configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=../github-actions/ class=md-nav__link> <span class=md-ellipsis> GitHub Actions </span> </a> </li> <li class=md-nav__item> <a href=../acp-integration/ class=md-nav__link> <span class=md-ellipsis> ACP Integration </span> </a> </li> <li class=md-nav__item> <a href=../custom-behaviors/ class=md-nav__link> <span class=md-ellipsis> Custom Behaviors </span> </a> </li> <li class=md-nav__item> <a href=../ollama-integration/ class=md-nav__link> <span class=md-ellipsis> Ollama Integration </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Performance Testing </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Performance Testing </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#installation class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=#use-cases class=md-nav__link> <span class=md-ellipsis> Use Cases </span> </a> </li> <li class=md-nav__item> <a href=#implementation-guide class=md-nav__link> <span class=md-ellipsis> Implementation Guide </span> </a> <nav class=md-nav aria-label="Implementation Guide"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-create-a-performance-test-behavior class=md-nav__link> <span class=md-ellipsis> 1. Create a Performance Test Behavior </span> </a> </li> <li class=md-nav__item> <a href=#2-implement-performance-test-evaluator-example class=md-nav__link> <span class=md-ellipsis> 2. Implement Performance Test Evaluator (Example) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> <nav class=md-nav aria-label=Configuration> <ul class=md-nav__list> <li class=md-nav__item> <a href=#basic-configuration class=md-nav__link> <span class=md-ellipsis> Basic Configuration </span> </a> </li> <li class=md-nav__item> <a href=#advanced-configuration class=md-nav__link> <span class=md-ellipsis> Advanced Configuration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#example-api-performance-test class=md-nav__link> <span class=md-ellipsis> Example: API Performance Test </span> </a> </li> <li class=md-nav__item> <a href=#running-performance-tests class=md-nav__link> <span class=md-ellipsis> Running Performance Tests </span> </a> <nav class=md-nav aria-label="Running Performance Tests"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#with-codeoptix-cli class=md-nav__link> <span class=md-ellipsis> With CodeOptiX CLI </span> </a> </li> <li class=md-nav__item> <a href=#with-python-api class=md-nav__link> <span class=md-ellipsis> With Python API </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#standalone-locust-tests class=md-nav__link> <span class=md-ellipsis> Standalone Locust Tests </span> </a> <nav class=md-nav aria-label="Standalone Locust Tests"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-locustfilepy class=md-nav__link> <span class=md-ellipsis> Create locustfile.py </span> </a> </li> <li class=md-nav__item> <a href=#run-locust class=md-nav__link> <span class=md-ellipsis> Run Locust </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#best-practices class=md-nav__link> <span class=md-ellipsis> Best Practices </span> </a> <nav class=md-nav aria-label="Best Practices"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-start-small class=md-nav__link> <span class=md-ellipsis> 1. Start Small </span> </a> </li> <li class=md-nav__item> <a href=#2-set-realistic-targets class=md-nav__link> <span class=md-ellipsis> 2. Set Realistic Targets </span> </a> </li> <li class=md-nav__item> <a href=#3-monitor-resources class=md-nav__link> <span class=md-ellipsis> 3. Monitor Resources </span> </a> </li> <li class=md-nav__item> <a href=#4-use-ramp-up class=md-nav__link> <span class=md-ellipsis> 4. Use Ramp-Up </span> </a> </li> <li class=md-nav__item> <a href=#5-test-different-scenarios class=md-nav__link> <span class=md-ellipsis> 5. Test Different Scenarios </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> <nav class=md-nav aria-label=Troubleshooting> <ul class=md-nav__list> <li class=md-nav__item> <a href=#locust-not-found class=md-nav__link> <span class=md-ellipsis> Locust Not Found </span> </a> </li> <li class=md-nav__item> <a href=#tests-too-slow class=md-nav__link> <span class=md-ellipsis> Tests Too Slow </span> </a> </li> <li class=md-nav__item> <a href=#connection-errors class=md-nav__link> <span class=md-ellipsis> Connection Errors </span> </a> </li> <li class=md-nav__item> <a href=#memory-issues class=md-nav__link> <span class=md-ellipsis> Memory Issues </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#next-steps class=md-nav__link> <span class=md-ellipsis> Next Steps </span> </a> </li> <li class=md-nav__item> <a href=#resources class=md-nav__link> <span class=md-ellipsis> Resources </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../ui-testing/ class=md-nav__link> <span class=md-ellipsis> UI Testing </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Advanced </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Advanced </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../advanced/gepa/ class=md-nav__link> <span class=md-ellipsis> GEPA Integration </span> </a> </li> <li class=md-nav__item> <a href=../../advanced/bloom/ class=md-nav__link> <span class=md-ellipsis> Bloom Integration </span> </a> </li> <li class=md-nav__item> <a href=../../advanced/error-handling/ class=md-nav__link> <span class=md-ellipsis> Error Handling </span> </a> </li> <li class=md-nav__item> <a href=../../advanced/performance/ class=md-nav__link> <span class=md-ellipsis> Performance </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../api-reference/ class=md-nav__link> <span class=md-ellipsis> API Reference </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Examples </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/behavioral-spec/ class=md-nav__link> <span class=md-ellipsis> Behavioral Spec Example </span> </a> </li> <li class=md-nav__item> <a href=../../examples/gepa-demo/ class=md-nav__link> <span class=md-ellipsis> GEPA Demonstration </span> </a> </li> <li class=md-nav__item> <a href=../../examples/adapter-usage/ class=md-nav__link> <span class=md-ellipsis> Basic Adapter Usage </span> </a> </li> <li class=md-nav__item> <a href=../../examples/acp-integration-examples/ class=md-nav__link> <span class=md-ellipsis> ACP Integration Examples </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#installation class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=#use-cases class=md-nav__link> <span class=md-ellipsis> Use Cases </span> </a> </li> <li class=md-nav__item> <a href=#implementation-guide class=md-nav__link> <span class=md-ellipsis> Implementation Guide </span> </a> <nav class=md-nav aria-label="Implementation Guide"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-create-a-performance-test-behavior class=md-nav__link> <span class=md-ellipsis> 1. Create a Performance Test Behavior </span> </a> </li> <li class=md-nav__item> <a href=#2-implement-performance-test-evaluator-example class=md-nav__link> <span class=md-ellipsis> 2. Implement Performance Test Evaluator (Example) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> <nav class=md-nav aria-label=Configuration> <ul class=md-nav__list> <li class=md-nav__item> <a href=#basic-configuration class=md-nav__link> <span class=md-ellipsis> Basic Configuration </span> </a> </li> <li class=md-nav__item> <a href=#advanced-configuration class=md-nav__link> <span class=md-ellipsis> Advanced Configuration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#example-api-performance-test class=md-nav__link> <span class=md-ellipsis> Example: API Performance Test </span> </a> </li> <li class=md-nav__item> <a href=#running-performance-tests class=md-nav__link> <span class=md-ellipsis> Running Performance Tests </span> </a> <nav class=md-nav aria-label="Running Performance Tests"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#with-codeoptix-cli class=md-nav__link> <span class=md-ellipsis> With CodeOptiX CLI </span> </a> </li> <li class=md-nav__item> <a href=#with-python-api class=md-nav__link> <span class=md-ellipsis> With Python API </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#standalone-locust-tests class=md-nav__link> <span class=md-ellipsis> Standalone Locust Tests </span> </a> <nav class=md-nav aria-label="Standalone Locust Tests"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-locustfilepy class=md-nav__link> <span class=md-ellipsis> Create locustfile.py </span> </a> </li> <li class=md-nav__item> <a href=#run-locust class=md-nav__link> <span class=md-ellipsis> Run Locust </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#best-practices class=md-nav__link> <span class=md-ellipsis> Best Practices </span> </a> <nav class=md-nav aria-label="Best Practices"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-start-small class=md-nav__link> <span class=md-ellipsis> 1. Start Small </span> </a> </li> <li class=md-nav__item> <a href=#2-set-realistic-targets class=md-nav__link> <span class=md-ellipsis> 2. Set Realistic Targets </span> </a> </li> <li class=md-nav__item> <a href=#3-monitor-resources class=md-nav__link> <span class=md-ellipsis> 3. Monitor Resources </span> </a> </li> <li class=md-nav__item> <a href=#4-use-ramp-up class=md-nav__link> <span class=md-ellipsis> 4. Use Ramp-Up </span> </a> </li> <li class=md-nav__item> <a href=#5-test-different-scenarios class=md-nav__link> <span class=md-ellipsis> 5. Test Different Scenarios </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> <nav class=md-nav aria-label=Troubleshooting> <ul class=md-nav__list> <li class=md-nav__item> <a href=#locust-not-found class=md-nav__link> <span class=md-ellipsis> Locust Not Found </span> </a> </li> <li class=md-nav__item> <a href=#tests-too-slow class=md-nav__link> <span class=md-ellipsis> Tests Too Slow </span> </a> </li> <li class=md-nav__item> <a href=#connection-errors class=md-nav__link> <span class=md-ellipsis> Connection Errors </span> </a> </li> <li class=md-nav__item> <a href=#memory-issues class=md-nav__link> <span class=md-ellipsis> Memory Issues </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#next-steps class=md-nav__link> <span class=md-ellipsis> Next Steps </span> </a> </li> <li class=md-nav__item> <a href=#resources class=md-nav__link> <span class=md-ellipsis> Resources </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=performance-testing-guide>Performance Testing Guide<a class=headerlink href=#performance-testing-guide title="Permanent link">&para;</a></h1> <div class="admonition warning"> <p class=admonition-title>Planned Feature</p> <p><strong>Performance testing is currently a planned feature, not yet implemented.</strong></p> <p>This guide shows how you can implement performance testing yourself by creating custom behaviors. The dependency (<code>locust</code>) is available as an optional dependency, but you'll need to implement the evaluators yourself.</p> </div> <hr> <h2 id=installation>Installation<a class=headerlink href=#installation title="Permanent link">&para;</a></h2> <p>Install performance testing dependencies:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>pip<span class=w> </span>install<span class=w> </span>codeoptix<span class=o>[</span>performance<span class=o>]</span>
</span></code></pre></div> <p>This installs: - <code>locust</code> - Load testing framework</p> <hr> <h2 id=use-cases>Use Cases<a class=headerlink href=#use-cases title="Permanent link">&para;</a></h2> <p>Performance testing in CodeOptiX would be useful for:</p> <ul> <li>✅ <strong>Load testing</strong> web applications</li> <li>✅ <strong>Stress testing</strong> APIs and endpoints</li> <li>✅ <strong>Performance benchmarking</strong> of agent-generated code</li> <li>✅ <strong>Identifying bottlenecks</strong> in applications</li> <li>✅ <strong>Validating performance requirements</strong></li> </ul> <hr> <h2 id=implementation-guide>Implementation Guide<a class=headerlink href=#implementation-guide title="Permanent link">&para;</a></h2> <div class="admonition note"> <p class=admonition-title>Custom Implementation Required</p> <p>Since performance testing is not yet implemented in CodeOptiX, you'll need to create your own custom behavior and evaluator. Here's how:</p> </div> <h3 id=1-create-a-performance-test-behavior>1. Create a Performance Test Behavior<a class=headerlink href=#1-create-a-performance-test-behavior title="Permanent link">&para;</a></h3> <p>Create a custom behavior that uses performance testing:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=kn>from</span><span class=w> </span><span class=nn>codeoptix.behaviors.base</span><span class=w> </span><span class=kn>import</span> <span class=n>BehaviorSpec</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=kn>from</span><span class=w> </span><span class=nn>codeoptix.evaluation.evaluators</span><span class=w> </span><span class=kn>import</span> <span class=n>LLMEvaluator</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=k>class</span><span class=w> </span><span class=nc>PerformanceBehavior</span><span class=p>(</span><span class=n>BehaviorSpec</span><span class=p>):</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Test application performance.&quot;&quot;&quot;</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a>    <span class=k>def</span><span class=w> </span><span class=nf>get_name</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a>        <span class=k>return</span> <span class=s2>&quot;performance&quot;</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a>
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a>    <span class=k>def</span><span class=w> </span><span class=nf>get_description</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a>        <span class=k>return</span> <span class=s2>&quot;Validates application performance under load&quot;</span>
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a>
</span><span id=__span-1-13><a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a>    <span class=k>def</span><span class=w> </span><span class=nf>create_evaluator</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-1-14><a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a>        <span class=c1># For now, use LLMEvaluator or create your own</span>
</span><span id=__span-1-15><a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a>        <span class=c1># TODO: Implement PerformanceEvaluator</span>
</span><span id=__span-1-16><a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a>        <span class=k>return</span> <span class=kc>None</span>  <span class=c1># You&#39;ll need to implement this</span>
</span></code></pre></div> <h3 id=2-implement-performance-test-evaluator-example>2. Implement Performance Test Evaluator (Example)<a class=headerlink href=#2-implement-performance-test-evaluator-example title="Permanent link">&para;</a></h3> <div class="admonition note"> <p class=admonition-title>Example Implementation</p> <p>This is an example of how you could implement performance testing. You'll need to integrate this into CodeOptiX's evaluation system yourself.</p> </div> <div class="language-python highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=c1># Example: Custom Performance Test Evaluator</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=c1># This is NOT part of CodeOptiX yet - you need to implement this yourself</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=kn>from</span><span class=w> </span><span class=nn>locust</span><span class=w> </span><span class=kn>import</span> <span class=n>HttpUser</span><span class=p>,</span> <span class=n>task</span><span class=p>,</span> <span class=n>between</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=kn>from</span><span class=w> </span><span class=nn>locust.env</span><span class=w> </span><span class=kn>import</span> <span class=n>Environment</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=kn>import</span><span class=w> </span><span class=nn>gevent</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>Any</span>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a>
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a><span class=k>class</span><span class=w> </span><span class=nc>PerformanceEvaluator</span><span class=p>:</span>
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Example: Evaluates performance using Locust.&quot;&quot;&quot;</span>
</span><span id=__span-2-11><a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a>
</span><span id=__span-2-12><a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a>    <span class=k>def</span><span class=w> </span><span class=nf>evaluate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>code</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>context</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span><span id=__span-2-13><a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Run performance tests.&quot;&quot;&quot;</span>
</span><span id=__span-2-14><a id=__codelineno-2-14 name=__codelineno-2-14 href=#__codelineno-2-14></a>        <span class=n>url</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;url&quot;</span><span class=p>,</span> <span class=s2>&quot;http://localhost:8000&quot;</span><span class=p>)</span>
</span><span id=__span-2-15><a id=__codelineno-2-15 name=__codelineno-2-15 href=#__codelineno-2-15></a>        <span class=n>users</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;users&quot;</span><span class=p>,</span> <span class=mi>10</span><span class=p>)</span>
</span><span id=__span-2-16><a id=__codelineno-2-16 name=__codelineno-2-16 href=#__codelineno-2-16></a>        <span class=n>spawn_rate</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;spawn_rate&quot;</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>
</span><span id=__span-2-17><a id=__codelineno-2-17 name=__codelineno-2-17 href=#__codelineno-2-17></a>        <span class=n>run_time</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;run_time&quot;</span><span class=p>,</span> <span class=s2>&quot;30s&quot;</span><span class=p>)</span>
</span><span id=__span-2-18><a id=__codelineno-2-18 name=__codelineno-2-18 href=#__codelineno-2-18></a>
</span><span id=__span-2-19><a id=__codelineno-2-19 name=__codelineno-2-19 href=#__codelineno-2-19></a>        <span class=c1># Define user behavior</span>
</span><span id=__span-2-20><a id=__codelineno-2-20 name=__codelineno-2-20 href=#__codelineno-2-20></a>        <span class=k>class</span><span class=w> </span><span class=nc>WebsiteUser</span><span class=p>(</span><span class=n>HttpUser</span><span class=p>):</span>
</span><span id=__span-2-21><a id=__codelineno-2-21 name=__codelineno-2-21 href=#__codelineno-2-21></a>            <span class=n>wait_time</span> <span class=o>=</span> <span class=n>between</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
</span><span id=__span-2-22><a id=__codelineno-2-22 name=__codelineno-2-22 href=#__codelineno-2-22></a>            <span class=n>host</span> <span class=o>=</span> <span class=n>url</span>
</span><span id=__span-2-23><a id=__codelineno-2-23 name=__codelineno-2-23 href=#__codelineno-2-23></a>
</span><span id=__span-2-24><a id=__codelineno-2-24 name=__codelineno-2-24 href=#__codelineno-2-24></a>            <span class=nd>@task</span>
</span><span id=__span-2-25><a id=__codelineno-2-25 name=__codelineno-2-25 href=#__codelineno-2-25></a>            <span class=k>def</span><span class=w> </span><span class=nf>index</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-2-26><a id=__codelineno-2-26 name=__codelineno-2-26 href=#__codelineno-2-26></a>                <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;/&quot;</span><span class=p>)</span>
</span><span id=__span-2-27><a id=__codelineno-2-27 name=__codelineno-2-27 href=#__codelineno-2-27></a>
</span><span id=__span-2-28><a id=__codelineno-2-28 name=__codelineno-2-28 href=#__codelineno-2-28></a>            <span class=nd>@task</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span><span id=__span-2-29><a id=__codelineno-2-29 name=__codelineno-2-29 href=#__codelineno-2-29></a>            <span class=k>def</span><span class=w> </span><span class=nf>api_endpoint</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-2-30><a id=__codelineno-2-30 name=__codelineno-2-30 href=#__codelineno-2-30></a>                <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;/api/data&quot;</span><span class=p>)</span>
</span><span id=__span-2-31><a id=__codelineno-2-31 name=__codelineno-2-31 href=#__codelineno-2-31></a>
</span><span id=__span-2-32><a id=__codelineno-2-32 name=__codelineno-2-32 href=#__codelineno-2-32></a>        <span class=c1># Setup Locust environment</span>
</span><span id=__span-2-33><a id=__codelineno-2-33 name=__codelineno-2-33 href=#__codelineno-2-33></a>        <span class=n>env</span> <span class=o>=</span> <span class=n>Environment</span><span class=p>(</span><span class=n>user_classes</span><span class=o>=</span><span class=p>[</span><span class=n>WebsiteUser</span><span class=p>])</span>
</span><span id=__span-2-34><a id=__codelineno-2-34 name=__codelineno-2-34 href=#__codelineno-2-34></a>        <span class=n>env</span><span class=o>.</span><span class=n>create_local_runner</span><span class=p>()</span>
</span><span id=__span-2-35><a id=__codelineno-2-35 name=__codelineno-2-35 href=#__codelineno-2-35></a>
</span><span id=__span-2-36><a id=__codelineno-2-36 name=__codelineno-2-36 href=#__codelineno-2-36></a>        <span class=c1># Start test</span>
</span><span id=__span-2-37><a id=__codelineno-2-37 name=__codelineno-2-37 href=#__codelineno-2-37></a>        <span class=n>env</span><span class=o>.</span><span class=n>runner</span><span class=o>.</span><span class=n>start</span><span class=p>(</span><span class=n>users</span><span class=p>,</span> <span class=n>spawn_rate</span><span class=o>=</span><span class=n>spawn_rate</span><span class=p>)</span>
</span><span id=__span-2-38><a id=__codelineno-2-38 name=__codelineno-2-38 href=#__codelineno-2-38></a>
</span><span id=__span-2-39><a id=__codelineno-2-39 name=__codelineno-2-39 href=#__codelineno-2-39></a>        <span class=c1># Run for specified duration</span>
</span><span id=__span-2-40><a id=__codelineno-2-40 name=__codelineno-2-40 href=#__codelineno-2-40></a>        <span class=n>gevent</span><span class=o>.</span><span class=n>spawn_later</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>run_time</span><span class=o>.</span><span class=n>rstrip</span><span class=p>(</span><span class=s1>&#39;s&#39;</span><span class=p>)),</span> <span class=k>lambda</span><span class=p>:</span> <span class=n>env</span><span class=o>.</span><span class=n>runner</span><span class=o>.</span><span class=n>quit</span><span class=p>())</span>
</span><span id=__span-2-41><a id=__codelineno-2-41 name=__codelineno-2-41 href=#__codelineno-2-41></a>
</span><span id=__span-2-42><a id=__codelineno-2-42 name=__codelineno-2-42 href=#__codelineno-2-42></a>        <span class=c1># Wait for test to complete</span>
</span><span id=__span-2-43><a id=__codelineno-2-43 name=__codelineno-2-43 href=#__codelineno-2-43></a>        <span class=n>env</span><span class=o>.</span><span class=n>runner</span><span class=o>.</span><span class=n>greenlet</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span><span id=__span-2-44><a id=__codelineno-2-44 name=__codelineno-2-44 href=#__codelineno-2-44></a>
</span><span id=__span-2-45><a id=__codelineno-2-45 name=__codelineno-2-45 href=#__codelineno-2-45></a>        <span class=c1># Get statistics</span>
</span><span id=__span-2-46><a id=__codelineno-2-46 name=__codelineno-2-46 href=#__codelineno-2-46></a>        <span class=n>stats</span> <span class=o>=</span> <span class=n>env</span><span class=o>.</span><span class=n>stats</span>
</span><span id=__span-2-47><a id=__codelineno-2-47 name=__codelineno-2-47 href=#__codelineno-2-47></a>
</span><span id=__span-2-48><a id=__codelineno-2-48 name=__codelineno-2-48 href=#__codelineno-2-48></a>        <span class=n>issues</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-2-49><a id=__codelineno-2-49 name=__codelineno-2-49 href=#__codelineno-2-49></a>        <span class=n>score</span> <span class=o>=</span> <span class=mf>1.0</span>
</span><span id=__span-2-50><a id=__codelineno-2-50 name=__codelineno-2-50 href=#__codelineno-2-50></a>
</span><span id=__span-2-51><a id=__codelineno-2-51 name=__codelineno-2-51 href=#__codelineno-2-51></a>        <span class=c1># Check response times</span>
</span><span id=__span-2-52><a id=__codelineno-2-52 name=__codelineno-2-52 href=#__codelineno-2-52></a>        <span class=k>for</span> <span class=n>name</span><span class=p>,</span> <span class=n>entry</span> <span class=ow>in</span> <span class=n>stats</span><span class=o>.</span><span class=n>entries</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span><span id=__span-2-53><a id=__codelineno-2-53 name=__codelineno-2-53 href=#__codelineno-2-53></a>            <span class=k>if</span> <span class=n>entry</span><span class=o>.</span><span class=n>num_requests</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
</span><span id=__span-2-54><a id=__codelineno-2-54 name=__codelineno-2-54 href=#__codelineno-2-54></a>                <span class=n>avg_response_time</span> <span class=o>=</span> <span class=n>entry</span><span class=o>.</span><span class=n>avg_response_time</span>
</span><span id=__span-2-55><a id=__codelineno-2-55 name=__codelineno-2-55 href=#__codelineno-2-55></a>                <span class=n>max_response_time</span> <span class=o>=</span> <span class=n>entry</span><span class=o>.</span><span class=n>max_response_time</span>
</span><span id=__span-2-56><a id=__codelineno-2-56 name=__codelineno-2-56 href=#__codelineno-2-56></a>
</span><span id=__span-2-57><a id=__codelineno-2-57 name=__codelineno-2-57 href=#__codelineno-2-57></a>                <span class=c1># Check if response times are acceptable</span>
</span><span id=__span-2-58><a id=__codelineno-2-58 name=__codelineno-2-58 href=#__codelineno-2-58></a>                <span class=k>if</span> <span class=n>avg_response_time</span> <span class=o>&gt;</span> <span class=mi>1000</span><span class=p>:</span>  <span class=c1># 1 second</span>
</span><span id=__span-2-59><a id=__codelineno-2-59 name=__codelineno-2-59 href=#__codelineno-2-59></a>                    <span class=n>issues</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>: Average response time too high (</span><span class=si>{</span><span class=n>avg_response_time</span><span class=si>:</span><span class=s2>.0f</span><span class=si>}</span><span class=s2>ms)&quot;</span><span class=p>)</span>
</span><span id=__span-2-60><a id=__codelineno-2-60 name=__codelineno-2-60 href=#__codelineno-2-60></a>                    <span class=n>score</span> <span class=o>-=</span> <span class=mf>0.2</span>
</span><span id=__span-2-61><a id=__codelineno-2-61 name=__codelineno-2-61 href=#__codelineno-2-61></a>
</span><span id=__span-2-62><a id=__codelineno-2-62 name=__codelineno-2-62 href=#__codelineno-2-62></a>                <span class=k>if</span> <span class=n>max_response_time</span> <span class=o>&gt;</span> <span class=mi>5000</span><span class=p>:</span>  <span class=c1># 5 seconds</span>
</span><span id=__span-2-63><a id=__codelineno-2-63 name=__codelineno-2-63 href=#__codelineno-2-63></a>                    <span class=n>issues</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>: Max response time too high (</span><span class=si>{</span><span class=n>max_response_time</span><span class=si>:</span><span class=s2>.0f</span><span class=si>}</span><span class=s2>ms)&quot;</span><span class=p>)</span>
</span><span id=__span-2-64><a id=__codelineno-2-64 name=__codelineno-2-64 href=#__codelineno-2-64></a>                    <span class=n>score</span> <span class=o>-=</span> <span class=mf>0.1</span>
</span><span id=__span-2-65><a id=__codelineno-2-65 name=__codelineno-2-65 href=#__codelineno-2-65></a>
</span><span id=__span-2-66><a id=__codelineno-2-66 name=__codelineno-2-66 href=#__codelineno-2-66></a>                <span class=c1># Check failure rate</span>
</span><span id=__span-2-67><a id=__codelineno-2-67 name=__codelineno-2-67 href=#__codelineno-2-67></a>                <span class=n>failure_rate</span> <span class=o>=</span> <span class=n>entry</span><span class=o>.</span><span class=n>num_failures</span> <span class=o>/</span> <span class=n>entry</span><span class=o>.</span><span class=n>num_requests</span> <span class=k>if</span> <span class=n>entry</span><span class=o>.</span><span class=n>num_requests</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=k>else</span> <span class=mi>0</span>
</span><span id=__span-2-68><a id=__codelineno-2-68 name=__codelineno-2-68 href=#__codelineno-2-68></a>                <span class=k>if</span> <span class=n>failure_rate</span> <span class=o>&gt;</span> <span class=mf>0.01</span><span class=p>:</span>  <span class=c1># 1% failure rate</span>
</span><span id=__span-2-69><a id=__codelineno-2-69 name=__codelineno-2-69 href=#__codelineno-2-69></a>                    <span class=n>issues</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>: Failure rate too high (</span><span class=si>{</span><span class=n>failure_rate</span><span class=si>:</span><span class=s2>.1%</span><span class=si>}</span><span class=s2>)&quot;</span><span class=p>)</span>
</span><span id=__span-2-70><a id=__codelineno-2-70 name=__codelineno-2-70 href=#__codelineno-2-70></a>                    <span class=n>score</span> <span class=o>-=</span> <span class=mf>0.3</span>
</span><span id=__span-2-71><a id=__codelineno-2-71 name=__codelineno-2-71 href=#__codelineno-2-71></a>
</span><span id=__span-2-72><a id=__codelineno-2-72 name=__codelineno-2-72 href=#__codelineno-2-72></a>        <span class=c1># Check total requests</span>
</span><span id=__span-2-73><a id=__codelineno-2-73 name=__codelineno-2-73 href=#__codelineno-2-73></a>        <span class=n>total_requests</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>entry</span><span class=o>.</span><span class=n>num_requests</span> <span class=k>for</span> <span class=n>entry</span> <span class=ow>in</span> <span class=n>stats</span><span class=o>.</span><span class=n>entries</span><span class=o>.</span><span class=n>values</span><span class=p>())</span>
</span><span id=__span-2-74><a id=__codelineno-2-74 name=__codelineno-2-74 href=#__codelineno-2-74></a>        <span class=k>if</span> <span class=n>total_requests</span> <span class=o>&lt;</span> <span class=mi>100</span><span class=p>:</span>
</span><span id=__span-2-75><a id=__codelineno-2-75 name=__codelineno-2-75 href=#__codelineno-2-75></a>            <span class=n>issues</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Too few requests completed: </span><span class=si>{</span><span class=n>total_requests</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-2-76><a id=__codelineno-2-76 name=__codelineno-2-76 href=#__codelineno-2-76></a>            <span class=n>score</span> <span class=o>-=</span> <span class=mf>0.1</span>
</span><span id=__span-2-77><a id=__codelineno-2-77 name=__codelineno-2-77 href=#__codelineno-2-77></a>
</span><span id=__span-2-78><a id=__codelineno-2-78 name=__codelineno-2-78 href=#__codelineno-2-78></a>        <span class=n>score</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>score</span><span class=p>)</span>
</span><span id=__span-2-79><a id=__codelineno-2-79 name=__codelineno-2-79 href=#__codelineno-2-79></a>
</span><span id=__span-2-80><a id=__codelineno-2-80 name=__codelineno-2-80 href=#__codelineno-2-80></a>        <span class=k>return</span> <span class=p>{</span>
</span><span id=__span-2-81><a id=__codelineno-2-81 name=__codelineno-2-81 href=#__codelineno-2-81></a>            <span class=s2>&quot;passed&quot;</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=n>issues</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span><span class=p>,</span>
</span><span id=__span-2-82><a id=__codelineno-2-82 name=__codelineno-2-82 href=#__codelineno-2-82></a>            <span class=s2>&quot;score&quot;</span><span class=p>:</span> <span class=n>score</span><span class=p>,</span>
</span><span id=__span-2-83><a id=__codelineno-2-83 name=__codelineno-2-83 href=#__codelineno-2-83></a>            <span class=s2>&quot;evidence&quot;</span><span class=p>:</span> <span class=n>issues</span><span class=p>,</span>
</span><span id=__span-2-84><a id=__codelineno-2-84 name=__codelineno-2-84 href=#__codelineno-2-84></a>            <span class=s2>&quot;stats&quot;</span><span class=p>:</span> <span class=p>{</span>
</span><span id=__span-2-85><a id=__codelineno-2-85 name=__codelineno-2-85 href=#__codelineno-2-85></a>                <span class=s2>&quot;total_requests&quot;</span><span class=p>:</span> <span class=n>total_requests</span><span class=p>,</span>
</span><span id=__span-2-86><a id=__codelineno-2-86 name=__codelineno-2-86 href=#__codelineno-2-86></a>                <span class=s2>&quot;total_failures&quot;</span><span class=p>:</span> <span class=nb>sum</span><span class=p>(</span><span class=n>entry</span><span class=o>.</span><span class=n>num_failures</span> <span class=k>for</span> <span class=n>entry</span> <span class=ow>in</span> <span class=n>stats</span><span class=o>.</span><span class=n>entries</span><span class=o>.</span><span class=n>values</span><span class=p>()),</span>
</span><span id=__span-2-87><a id=__codelineno-2-87 name=__codelineno-2-87 href=#__codelineno-2-87></a>            <span class=p>}</span>
</span><span id=__span-2-88><a id=__codelineno-2-88 name=__codelineno-2-88 href=#__codelineno-2-88></a>        <span class=p>}</span>
</span></code></pre></div> <hr> <h2 id=configuration>Configuration<a class=headerlink href=#configuration title="Permanent link">&para;</a></h2> <h3 id=basic-configuration>Basic Configuration<a class=headerlink href=#basic-configuration title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=n>context</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>    <span class=s2>&quot;url&quot;</span><span class=p>:</span> <span class=s2>&quot;http://localhost:8000&quot;</span><span class=p>,</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>    <span class=s2>&quot;users&quot;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>           <span class=c1># Number of concurrent users</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>    <span class=s2>&quot;spawn_rate&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>       <span class=c1># Users spawned per second</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>    <span class=s2>&quot;run_time&quot;</span><span class=p>:</span> <span class=s2>&quot;30s&quot;</span><span class=p>,</span>     <span class=c1># Test duration</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=p>}</span>
</span></code></pre></div> <h3 id=advanced-configuration>Advanced Configuration<a class=headerlink href=#advanced-configuration title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=n>context</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>    <span class=s2>&quot;url&quot;</span><span class=p>:</span> <span class=s2>&quot;http://localhost:8000&quot;</span><span class=p>,</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>    <span class=s2>&quot;users&quot;</span><span class=p>:</span> <span class=mi>50</span><span class=p>,</span>           <span class=c1># Higher load</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>    <span class=s2>&quot;spawn_rate&quot;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>       <span class=c1># Faster ramp-up</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>    <span class=s2>&quot;run_time&quot;</span><span class=p>:</span> <span class=s2>&quot;2m&quot;</span><span class=p>,</span>      <span class=c1># Longer test</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>    <span class=s2>&quot;max_response_time&quot;</span><span class=p>:</span> <span class=mi>500</span><span class=p>,</span>  <span class=c1># Custom threshold (ms)</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a>    <span class=s2>&quot;max_failure_rate&quot;</span><span class=p>:</span> <span class=mf>0.01</span><span class=p>,</span>  <span class=c1># 1% max failures</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=p>}</span>
</span></code></pre></div> <hr> <h2 id=example-api-performance-test>Example: API Performance Test<a class=headerlink href=#example-api-performance-test title="Permanent link">&para;</a></h2> <div class="language-python highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=kn>from</span><span class=w> </span><span class=nn>codeoptix.behaviors.base</span><span class=w> </span><span class=kn>import</span> <span class=n>BehaviorSpec</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=kn>from</span><span class=w> </span><span class=nn>codeoptix.evaluation.evaluators</span><span class=w> </span><span class=kn>import</span> <span class=n>BaseEvaluator</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=kn>from</span><span class=w> </span><span class=nn>locust</span><span class=w> </span><span class=kn>import</span> <span class=n>HttpUser</span><span class=p>,</span> <span class=n>task</span><span class=p>,</span> <span class=n>between</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=kn>from</span><span class=w> </span><span class=nn>locust.env</span><span class=w> </span><span class=kn>import</span> <span class=n>Environment</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=kn>import</span><span class=w> </span><span class=nn>gevent</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=k>class</span><span class=w> </span><span class=nc>APIPerformanceBehavior</span><span class=p>(</span><span class=n>BehaviorSpec</span><span class=p>):</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Tests API performance.&quot;&quot;&quot;</span>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a>    <span class=k>def</span><span class=w> </span><span class=nf>get_name</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a>        <span class=k>return</span> <span class=s2>&quot;api-performance&quot;</span>
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a>
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a>    <span class=k>def</span><span class=w> </span><span class=nf>get_description</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a>        <span class=k>return</span> <span class=s2>&quot;Validates API performance under load&quot;</span>
</span><span id=__span-5-15><a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a>
</span><span id=__span-5-16><a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a>    <span class=k>def</span><span class=w> </span><span class=nf>create_evaluator</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>BaseEvaluator</span><span class=p>:</span>
</span><span id=__span-5-17><a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a>        <span class=k>return</span> <span class=n>APIPerformanceEvaluator</span><span class=p>()</span>
</span><span id=__span-5-18><a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a>
</span><span id=__span-5-19><a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a><span class=k>class</span><span class=w> </span><span class=nc>APIPerformanceEvaluator</span><span class=p>(</span><span class=n>BaseEvaluator</span><span class=p>):</span>
</span><span id=__span-5-20><a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a>    <span class=k>def</span><span class=w> </span><span class=nf>evaluate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>code</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>context</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span><span id=__span-5-21><a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a>        <span class=n>url</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;url&quot;</span><span class=p>,</span> <span class=s2>&quot;http://localhost:8000&quot;</span><span class=p>)</span>
</span><span id=__span-5-22><a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a>        <span class=n>users</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;users&quot;</span><span class=p>,</span> <span class=mi>20</span><span class=p>)</span>
</span><span id=__span-5-23><a id=__codelineno-5-23 name=__codelineno-5-23 href=#__codelineno-5-23></a>
</span><span id=__span-5-24><a id=__codelineno-5-24 name=__codelineno-5-24 href=#__codelineno-5-24></a>        <span class=k>class</span><span class=w> </span><span class=nc>APIUser</span><span class=p>(</span><span class=n>HttpUser</span><span class=p>):</span>
</span><span id=__span-5-25><a id=__codelineno-5-25 name=__codelineno-5-25 href=#__codelineno-5-25></a>            <span class=n>wait_time</span> <span class=o>=</span> <span class=n>between</span><span class=p>(</span><span class=mf>0.5</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>
</span><span id=__span-5-26><a id=__codelineno-5-26 name=__codelineno-5-26 href=#__codelineno-5-26></a>            <span class=n>host</span> <span class=o>=</span> <span class=n>url</span>
</span><span id=__span-5-27><a id=__codelineno-5-27 name=__codelineno-5-27 href=#__codelineno-5-27></a>
</span><span id=__span-5-28><a id=__codelineno-5-28 name=__codelineno-5-28 href=#__codelineno-5-28></a>            <span class=nd>@task</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
</span><span id=__span-5-29><a id=__codelineno-5-29 name=__codelineno-5-29 href=#__codelineno-5-29></a>            <span class=k>def</span><span class=w> </span><span class=nf>get_users</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-5-30><a id=__codelineno-5-30 name=__codelineno-5-30 href=#__codelineno-5-30></a>                <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;/api/users&quot;</span><span class=p>)</span>
</span><span id=__span-5-31><a id=__codelineno-5-31 name=__codelineno-5-31 href=#__codelineno-5-31></a>
</span><span id=__span-5-32><a id=__codelineno-5-32 name=__codelineno-5-32 href=#__codelineno-5-32></a>            <span class=nd>@task</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span><span id=__span-5-33><a id=__codelineno-5-33 name=__codelineno-5-33 href=#__codelineno-5-33></a>            <span class=k>def</span><span class=w> </span><span class=nf>get_posts</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-5-34><a id=__codelineno-5-34 name=__codelineno-5-34 href=#__codelineno-5-34></a>                <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;/api/posts&quot;</span><span class=p>)</span>
</span><span id=__span-5-35><a id=__codelineno-5-35 name=__codelineno-5-35 href=#__codelineno-5-35></a>
</span><span id=__span-5-36><a id=__codelineno-5-36 name=__codelineno-5-36 href=#__codelineno-5-36></a>            <span class=nd>@task</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span><span id=__span-5-37><a id=__codelineno-5-37 name=__codelineno-5-37 href=#__codelineno-5-37></a>            <span class=k>def</span><span class=w> </span><span class=nf>create_post</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-5-38><a id=__codelineno-5-38 name=__codelineno-5-38 href=#__codelineno-5-38></a>                <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=s2>&quot;/api/posts&quot;</span><span class=p>,</span> <span class=n>json</span><span class=o>=</span><span class=p>{</span>
</span><span id=__span-5-39><a id=__codelineno-5-39 name=__codelineno-5-39 href=#__codelineno-5-39></a>                    <span class=s2>&quot;title&quot;</span><span class=p>:</span> <span class=s2>&quot;Test&quot;</span><span class=p>,</span>
</span><span id=__span-5-40><a id=__codelineno-5-40 name=__codelineno-5-40 href=#__codelineno-5-40></a>                    <span class=s2>&quot;content&quot;</span><span class=p>:</span> <span class=s2>&quot;Test content&quot;</span>
</span><span id=__span-5-41><a id=__codelineno-5-41 name=__codelineno-5-41 href=#__codelineno-5-41></a>                <span class=p>})</span>
</span><span id=__span-5-42><a id=__codelineno-5-42 name=__codelineno-5-42 href=#__codelineno-5-42></a>
</span><span id=__span-5-43><a id=__codelineno-5-43 name=__codelineno-5-43 href=#__codelineno-5-43></a>        <span class=n>env</span> <span class=o>=</span> <span class=n>Environment</span><span class=p>(</span><span class=n>user_classes</span><span class=o>=</span><span class=p>[</span><span class=n>APIUser</span><span class=p>])</span>
</span><span id=__span-5-44><a id=__codelineno-5-44 name=__codelineno-5-44 href=#__codelineno-5-44></a>        <span class=n>env</span><span class=o>.</span><span class=n>create_local_runner</span><span class=p>()</span>
</span><span id=__span-5-45><a id=__codelineno-5-45 name=__codelineno-5-45 href=#__codelineno-5-45></a>
</span><span id=__span-5-46><a id=__codelineno-5-46 name=__codelineno-5-46 href=#__codelineno-5-46></a>        <span class=c1># Run test</span>
</span><span id=__span-5-47><a id=__codelineno-5-47 name=__codelineno-5-47 href=#__codelineno-5-47></a>        <span class=n>env</span><span class=o>.</span><span class=n>runner</span><span class=o>.</span><span class=n>start</span><span class=p>(</span><span class=n>users</span><span class=p>,</span> <span class=n>spawn_rate</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
</span><span id=__span-5-48><a id=__codelineno-5-48 name=__codelineno-5-48 href=#__codelineno-5-48></a>        <span class=n>gevent</span><span class=o>.</span><span class=n>spawn_later</span><span class=p>(</span><span class=mi>30</span><span class=p>,</span> <span class=k>lambda</span><span class=p>:</span> <span class=n>env</span><span class=o>.</span><span class=n>runner</span><span class=o>.</span><span class=n>quit</span><span class=p>())</span>
</span><span id=__span-5-49><a id=__codelineno-5-49 name=__codelineno-5-49 href=#__codelineno-5-49></a>        <span class=n>env</span><span class=o>.</span><span class=n>runner</span><span class=o>.</span><span class=n>greenlet</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span><span id=__span-5-50><a id=__codelineno-5-50 name=__codelineno-5-50 href=#__codelineno-5-50></a>
</span><span id=__span-5-51><a id=__codelineno-5-51 name=__codelineno-5-51 href=#__codelineno-5-51></a>        <span class=c1># Analyze results</span>
</span><span id=__span-5-52><a id=__codelineno-5-52 name=__codelineno-5-52 href=#__codelineno-5-52></a>        <span class=n>issues</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-5-53><a id=__codelineno-5-53 name=__codelineno-5-53 href=#__codelineno-5-53></a>        <span class=n>stats</span> <span class=o>=</span> <span class=n>env</span><span class=o>.</span><span class=n>stats</span>
</span><span id=__span-5-54><a id=__codelineno-5-54 name=__codelineno-5-54 href=#__codelineno-5-54></a>
</span><span id=__span-5-55><a id=__codelineno-5-55 name=__codelineno-5-55 href=#__codelineno-5-55></a>        <span class=k>for</span> <span class=n>name</span><span class=p>,</span> <span class=n>entry</span> <span class=ow>in</span> <span class=n>stats</span><span class=o>.</span><span class=n>entries</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span><span id=__span-5-56><a id=__codelineno-5-56 name=__codelineno-5-56 href=#__codelineno-5-56></a>            <span class=k>if</span> <span class=n>entry</span><span class=o>.</span><span class=n>num_requests</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
</span><span id=__span-5-57><a id=__codelineno-5-57 name=__codelineno-5-57 href=#__codelineno-5-57></a>                <span class=n>avg_time</span> <span class=o>=</span> <span class=n>entry</span><span class=o>.</span><span class=n>avg_response_time</span>
</span><span id=__span-5-58><a id=__codelineno-5-58 name=__codelineno-5-58 href=#__codelineno-5-58></a>                <span class=n>p95_time</span> <span class=o>=</span> <span class=n>entry</span><span class=o>.</span><span class=n>get_response_time_percentile</span><span class=p>(</span><span class=mf>0.95</span><span class=p>)</span>
</span><span id=__span-5-59><a id=__codelineno-5-59 name=__codelineno-5-59 href=#__codelineno-5-59></a>
</span><span id=__span-5-60><a id=__codelineno-5-60 name=__codelineno-5-60 href=#__codelineno-5-60></a>                <span class=k>if</span> <span class=n>avg_time</span> <span class=o>&gt;</span> <span class=mi>500</span><span class=p>:</span>
</span><span id=__span-5-61><a id=__codelineno-5-61 name=__codelineno-5-61 href=#__codelineno-5-61></a>                    <span class=n>issues</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>: Avg </span><span class=si>{</span><span class=n>avg_time</span><span class=si>:</span><span class=s2>.0f</span><span class=si>}</span><span class=s2>ms (target: &lt;500ms)&quot;</span><span class=p>)</span>
</span><span id=__span-5-62><a id=__codelineno-5-62 name=__codelineno-5-62 href=#__codelineno-5-62></a>
</span><span id=__span-5-63><a id=__codelineno-5-63 name=__codelineno-5-63 href=#__codelineno-5-63></a>                <span class=k>if</span> <span class=n>p95_time</span> <span class=o>&gt;</span> <span class=mi>1000</span><span class=p>:</span>
</span><span id=__span-5-64><a id=__codelineno-5-64 name=__codelineno-5-64 href=#__codelineno-5-64></a>                    <span class=n>issues</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>: P95 </span><span class=si>{</span><span class=n>p95_time</span><span class=si>:</span><span class=s2>.0f</span><span class=si>}</span><span class=s2>ms (target: &lt;1000ms)&quot;</span><span class=p>)</span>
</span><span id=__span-5-65><a id=__codelineno-5-65 name=__codelineno-5-65 href=#__codelineno-5-65></a>
</span><span id=__span-5-66><a id=__codelineno-5-66 name=__codelineno-5-66 href=#__codelineno-5-66></a>        <span class=n>score</span> <span class=o>=</span> <span class=mf>1.0</span> <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>issues</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span> <span class=k>else</span> <span class=nb>max</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=mf>1.0</span> <span class=o>-</span> <span class=nb>len</span><span class=p>(</span><span class=n>issues</span><span class=p>)</span> <span class=o>*</span> <span class=mf>0.15</span><span class=p>)</span>
</span><span id=__span-5-67><a id=__codelineno-5-67 name=__codelineno-5-67 href=#__codelineno-5-67></a>
</span><span id=__span-5-68><a id=__codelineno-5-68 name=__codelineno-5-68 href=#__codelineno-5-68></a>        <span class=k>return</span> <span class=p>{</span>
</span><span id=__span-5-69><a id=__codelineno-5-69 name=__codelineno-5-69 href=#__codelineno-5-69></a>            <span class=s2>&quot;passed&quot;</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=n>issues</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span><span class=p>,</span>
</span><span id=__span-5-70><a id=__codelineno-5-70 name=__codelineno-5-70 href=#__codelineno-5-70></a>            <span class=s2>&quot;score&quot;</span><span class=p>:</span> <span class=n>score</span><span class=p>,</span>
</span><span id=__span-5-71><a id=__codelineno-5-71 name=__codelineno-5-71 href=#__codelineno-5-71></a>            <span class=s2>&quot;evidence&quot;</span><span class=p>:</span> <span class=n>issues</span><span class=p>,</span>
</span><span id=__span-5-72><a id=__codelineno-5-72 name=__codelineno-5-72 href=#__codelineno-5-72></a>        <span class=p>}</span>
</span></code></pre></div> <hr> <h2 id=running-performance-tests>Running Performance Tests<a class=headerlink href=#running-performance-tests title="Permanent link">&para;</a></h2> <h3 id=with-codeoptix-cli>With CodeOptiX CLI<a class=headerlink href=#with-codeoptix-cli title="Permanent link">&para;</a></h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=c1># Set up your application URL</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=nb>export</span><span class=w> </span><span class=nv>APP_URL</span><span class=o>=</span><span class=s2>&quot;http://localhost:8000&quot;</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=c1># Run performance evaluation</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a>codeoptix<span class=w> </span><span class=nb>eval</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=w>  </span>--agent<span class=w> </span>codex<span class=w> </span><span class=se>\</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=w>  </span>--behaviors<span class=w> </span>api-performance<span class=w> </span><span class=se>\</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=w>  </span>--context<span class=w> </span><span class=s1>&#39;{&quot;url&quot;: &quot;http://localhost:8000&quot;, &quot;users&quot;: 20, &quot;run_time&quot;: &quot;30s&quot;}&#39;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=w>  </span>--llm-provider<span class=w> </span>openai
</span></code></pre></div> <h3 id=with-python-api>With Python API<a class=headerlink href=#with-python-api title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=kn>from</span><span class=w> </span><span class=nn>codeoptix.adapters.factory</span><span class=w> </span><span class=kn>import</span> <span class=n>create_adapter</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=kn>from</span><span class=w> </span><span class=nn>codeoptix.evaluation</span><span class=w> </span><span class=kn>import</span> <span class=n>EvaluationEngine</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=kn>from</span><span class=w> </span><span class=nn>codeoptix.utils.llm</span><span class=w> </span><span class=kn>import</span> <span class=n>create_llm_client</span><span class=p>,</span> <span class=n>LLMProvider</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=kn>import</span><span class=w> </span><span class=nn>os</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=c1># Create adapter</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=n>adapter</span> <span class=o>=</span> <span class=n>create_adapter</span><span class=p>(</span><span class=s2>&quot;codex&quot;</span><span class=p>,</span> <span class=p>{</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a>    <span class=s2>&quot;llm_config&quot;</span><span class=p>:</span> <span class=p>{</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a>        <span class=s2>&quot;provider&quot;</span><span class=p>:</span> <span class=s2>&quot;openai&quot;</span><span class=p>,</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a>        <span class=s2>&quot;api_key&quot;</span><span class=p>:</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;OPENAI_API_KEY&quot;</span><span class=p>),</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a>    <span class=p>}</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a><span class=p>})</span>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a>
</span><span id=__span-7-14><a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a><span class=c1># Create evaluation engine</span>
</span><span id=__span-7-15><a id=__codelineno-7-15 name=__codelineno-7-15 href=#__codelineno-7-15></a><span class=n>llm_client</span> <span class=o>=</span> <span class=n>create_llm_client</span><span class=p>(</span><span class=n>LLMProvider</span><span class=o>.</span><span class=n>OPENAI</span><span class=p>)</span>
</span><span id=__span-7-16><a id=__codelineno-7-16 name=__codelineno-7-16 href=#__codelineno-7-16></a><span class=n>engine</span> <span class=o>=</span> <span class=n>EvaluationEngine</span><span class=p>(</span><span class=n>adapter</span><span class=p>,</span> <span class=n>llm_client</span><span class=p>)</span>
</span><span id=__span-7-17><a id=__codelineno-7-17 name=__codelineno-7-17 href=#__codelineno-7-17></a>
</span><span id=__span-7-18><a id=__codelineno-7-18 name=__codelineno-7-18 href=#__codelineno-7-18></a><span class=c1># Run performance test</span>
</span><span id=__span-7-19><a id=__codelineno-7-19 name=__codelineno-7-19 href=#__codelineno-7-19></a><span class=n>results</span> <span class=o>=</span> <span class=n>engine</span><span class=o>.</span><span class=n>evaluate_behaviors</span><span class=p>(</span>
</span><span id=__span-7-20><a id=__codelineno-7-20 name=__codelineno-7-20 href=#__codelineno-7-20></a>    <span class=n>behavior_names</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;api-performance&quot;</span><span class=p>],</span>
</span><span id=__span-7-21><a id=__codelineno-7-21 name=__codelineno-7-21 href=#__codelineno-7-21></a>    <span class=n>context</span><span class=o>=</span><span class=p>{</span>
</span><span id=__span-7-22><a id=__codelineno-7-22 name=__codelineno-7-22 href=#__codelineno-7-22></a>        <span class=s2>&quot;url&quot;</span><span class=p>:</span> <span class=s2>&quot;http://localhost:8000&quot;</span><span class=p>,</span>
</span><span id=__span-7-23><a id=__codelineno-7-23 name=__codelineno-7-23 href=#__codelineno-7-23></a>        <span class=s2>&quot;users&quot;</span><span class=p>:</span> <span class=mi>20</span><span class=p>,</span>
</span><span id=__span-7-24><a id=__codelineno-7-24 name=__codelineno-7-24 href=#__codelineno-7-24></a>        <span class=s2>&quot;spawn_rate&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
</span><span id=__span-7-25><a id=__codelineno-7-25 name=__codelineno-7-25 href=#__codelineno-7-25></a>        <span class=s2>&quot;run_time&quot;</span><span class=p>:</span> <span class=s2>&quot;30s&quot;</span><span class=p>,</span>
</span><span id=__span-7-26><a id=__codelineno-7-26 name=__codelineno-7-26 href=#__codelineno-7-26></a>    <span class=p>}</span>
</span><span id=__span-7-27><a id=__codelineno-7-27 name=__codelineno-7-27 href=#__codelineno-7-27></a><span class=p>)</span>
</span><span id=__span-7-28><a id=__codelineno-7-28 name=__codelineno-7-28 href=#__codelineno-7-28></a>
</span><span id=__span-7-29><a id=__codelineno-7-29 name=__codelineno-7-29 href=#__codelineno-7-29></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Performance Score: </span><span class=si>{</span><span class=n>results</span><span class=p>[</span><span class=s1>&#39;overall_score&#39;</span><span class=p>]</span><span class=si>:</span><span class=s2>.2%</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span></code></pre></div> <hr> <h2 id=standalone-locust-tests>Standalone Locust Tests<a class=headerlink href=#standalone-locust-tests title="Permanent link">&para;</a></h2> <p>You can also run Locust tests directly:</p> <h3 id=create-locustfilepy>Create <code>locustfile.py</code><a class=headerlink href=#create-locustfilepy title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=kn>from</span><span class=w> </span><span class=nn>locust</span><span class=w> </span><span class=kn>import</span> <span class=n>HttpUser</span><span class=p>,</span> <span class=n>task</span><span class=p>,</span> <span class=n>between</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=k>class</span><span class=w> </span><span class=nc>WebsiteUser</span><span class=p>(</span><span class=n>HttpUser</span><span class=p>):</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>    <span class=n>wait_time</span> <span class=o>=</span> <span class=n>between</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>    <span class=n>host</span> <span class=o>=</span> <span class=s2>&quot;http://localhost:8000&quot;</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a>    <span class=nd>@task</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a>    <span class=k>def</span><span class=w> </span><span class=nf>index</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a>        <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;/&quot;</span><span class=p>)</span>
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a>    <span class=nd>@task</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a>    <span class=k>def</span><span class=w> </span><span class=nf>api</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a>        <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;/api/data&quot;</span><span class=p>)</span>
</span></code></pre></div> <h3 id=run-locust>Run Locust<a class=headerlink href=#run-locust title="Permanent link">&para;</a></h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=c1># Web UI mode</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>locust
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=c1># Headless mode</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>locust<span class=w> </span>--headless<span class=w> </span>-u<span class=w> </span><span class=m>10</span><span class=w> </span>-r<span class=w> </span><span class=m>2</span><span class=w> </span>-t<span class=w> </span>30s
</span></code></pre></div> <hr> <h2 id=best-practices>Best Practices<a class=headerlink href=#best-practices title="Permanent link">&para;</a></h2> <h3 id=1-start-small>1. Start Small<a class=headerlink href=#1-start-small title="Permanent link">&para;</a></h3> <p>Begin with low user counts and gradually increase:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=n>context</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>    <span class=s2>&quot;users&quot;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>      <span class=c1># Start small</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>    <span class=s2>&quot;spawn_rate&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a>    <span class=s2>&quot;run_time&quot;</span><span class=p>:</span> <span class=s2>&quot;10s&quot;</span><span class=p>,</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=p>}</span>
</span></code></pre></div> <h3 id=2-set-realistic-targets>2. Set Realistic Targets<a class=headerlink href=#2-set-realistic-targets title="Permanent link">&para;</a></h3> <p>Define performance thresholds:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=n>max_response_time</span> <span class=o>=</span> <span class=mi>500</span>  <span class=c1># 500ms</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=n>max_failure_rate</span> <span class=o>=</span> <span class=mf>0.01</span>  <span class=c1># 1%</span>
</span></code></pre></div> <h3 id=3-monitor-resources>3. Monitor Resources<a class=headerlink href=#3-monitor-resources title="Permanent link">&para;</a></h3> <p>Watch server resources during tests:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=c1># Monitor CPU and memory</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>top
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>htop
</span></code></pre></div> <h3 id=4-use-ramp-up>4. Use Ramp-Up<a class=headerlink href=#4-use-ramp-up title="Permanent link">&para;</a></h3> <p>Gradually increase load:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=n>context</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>    <span class=s2>&quot;spawn_rate&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>  <span class=c1># 2 users per second</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=p>}</span>
</span></code></pre></div> <h3 id=5-test-different-scenarios>5. Test Different Scenarios<a class=headerlink href=#5-test-different-scenarios title="Permanent link">&para;</a></h3> <p>Test various endpoints and user behaviors:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=nd>@task</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=k>def</span><span class=w> </span><span class=nf>light_endpoint</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a>    <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;/api/status&quot;</span><span class=p>)</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=nd>@task</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=k>def</span><span class=w> </span><span class=nf>heavy_endpoint</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a>    <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;/api/complex-query&quot;</span><span class=p>)</span>
</span></code></pre></div> <hr> <h2 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Permanent link">&para;</a></h2> <h3 id=locust-not-found>Locust Not Found<a class=headerlink href=#locust-not-found title="Permanent link">&para;</a></h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a>pip<span class=w> </span>install<span class=w> </span>codeoptix<span class=o>[</span>performance<span class=o>]</span>
</span></code></pre></div> <h3 id=tests-too-slow>Tests Too Slow<a class=headerlink href=#tests-too-slow title="Permanent link">&para;</a></h3> <p>Reduce user count or test duration:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=n>context</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a>    <span class=s2>&quot;users&quot;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>        <span class=c1># Lower users</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a>    <span class=s2>&quot;run_time&quot;</span><span class=p>:</span> <span class=s2>&quot;10s&quot;</span><span class=p>,</span> <span class=c1># Shorter duration</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=p>}</span>
</span></code></pre></div> <h3 id=connection-errors>Connection Errors<a class=headerlink href=#connection-errors title="Permanent link">&para;</a></h3> <p>Check if the application is running:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a>curl<span class=w> </span>http://localhost:8000
</span></code></pre></div> <h3 id=memory-issues>Memory Issues<a class=headerlink href=#memory-issues title="Permanent link">&para;</a></h3> <p>Reduce concurrent users:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=n>context</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a>    <span class=s2>&quot;users&quot;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>  <span class=c1># Lower concurrent users</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=p>}</span>
</span></code></pre></div> <hr> <h2 id=next-steps>Next Steps<a class=headerlink href=#next-steps title="Permanent link">&para;</a></h2> <ul> <li><a href=../custom-behaviors/ >Custom Behaviors Guide</a> - Create your own performance behaviors</li> <li><a href=../python-api/ >Python API Guide</a> - Advanced usage</li> <li><a href=../configuration/ >Configuration Guide</a> - Configure performance testing</li> </ul> <hr> <h2 id=resources>Resources<a class=headerlink href=#resources title="Permanent link">&para;</a></h2> <ul> <li><a href=https://docs.locust.io/ >Locust Documentation</a></li> <li><a href=../../concepts/behaviors/ >CodeOptiX Behaviors</a></li> <li><a href=https://docs.locust.io/en/stable/writing-a-locustfile.html>Performance Testing Best Practices</a></li> </ul> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> </body> </html>